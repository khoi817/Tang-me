<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quà 20/10 — Gửi Mẹ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Rules popup shown on load -->
  <div id="rulesOverlay" class="overlay active" aria-hidden="false">
    <div class="modal rules">
      <h2>💌 Luật chơi</h2>
      <p>
        Xin chào Mẹ — có một trò chơi nhỏ dành cho mẹ. <br>
        Bấm vào những trái tim đang bay để thu thập. Mỗi lần thu tim, tốc độ sẽ tăng nhẹ. <br>
        Khi thu đủ <strong>10 trái tim</strong>, một bức thư đặc biệt sẽ xuất hiện. <br>
        Bấm vào thư để đọc lời chúc con gửi mẹ.
      </p>
      <div class="rules-actions">
        <button id="startBtn" class="btn primary">Bắt đầu</button>
      </div>
    </div>
  </div>

  <!-- Top HUD: progress -->
  <header id="hud">
    <div id="progress" class="progress">0 / 10 ❤️</div>
  </header>

  <!-- Main stage -->
  <main id="stage">
    <div id="momWrap">
      <img id="momImg"
           src="https://i.postimg.cc/wM0RX97K/IMG-20240907-115201.jpg"
           alt="Ảnh mẹ">
    </div>

    <!-- Preload heart sprite (SVG data URL set in script) -->
    <img id="heartSprite" src="" alt="" aria-hidden="true" style="display:none">

    <!-- Canvas where the DVD heart moves -->
    <canvas id="dvdCanvas" tabindex="0" aria-label="Khu vực chơi"></canvas>

    <!-- confetti canvas -->
    <canvas id="confettiCanvas" class="hidden" aria-hidden="true"></canvas>
  </main>

  <!-- Letter overlay (appears when win) -->
  <div id="letterOverlay" class="overlay hidden" aria-hidden="true">
    <div class="modal letter">
      <div class="letter-top">💌</div>
      <h2>Gửi Mẹ yêu</h2>
      <div id="letterBody" class="letter-body">
        <!-- message will type here -->
      </div>
      <div class="letter-actions">
        <button id="closeLetter" class="btn">Đóng</button>
      </div>
    </div>
  </div>

  <!-- background audio (will be played after user starts game) -->
  <audio id="bgAudio" loop preload="auto"
         src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_7a70595de1.mp3?filename=acoustic-guitar-ambient-10741.mp3"></audio>

  <script src="script.js"></script>
</body>
</html>